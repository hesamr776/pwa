(self.webpackChunknakhlex=self.webpackChunknakhlex||[]).push([[8881],{26470:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AssetsList=void 0;var l=r(n(67294)),a=n(59693),u=n(19716),o=this;t.AssetsList=function(e){var t=e.assets,n=e.frozenValues;return l.default.createElement(a.View,{paddingHorizontal:"l",__self:o,__source:{fileName:"/Users/phinix/Workspace/BitBayt/src/features/Wallet/components/AssetsList.tsx",lineNumber:16,columnNumber:3}},t&&t.map((function(e){return(0,u.AssetsListItem)(e,n)})))}},19716:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AssetsListItem=void 0;var l=r(n(67154)),a=n(39698),u=r(n(67294)),o=n(59693),i=this,s="/Users/phinix/Workspace/BitBayt/src/features/Wallet/components/AssetsListItem.tsx";t.AssetsListItem=function(e,t){return u.default.createElement(o.View,{key:"asset-listItem_"+e.id,flex:1,flexDirection:"row",borderBottomWidth:1,paddingVertical:"s",borderBottomColor:"gray3",alignItems:"center",justifyContent:"space-between",__self:i,__source:{fileName:s,lineNumber:13,columnNumber:5}},u.default.createElement(o.View,{flexDirection:"row",alignItems:"center",__self:i,__source:{fileName:s,lineNumber:22,columnNumber:7}},u.default.createElement(o.Image,{name:e.id,width:30,height:30,__self:i,__source:{fileName:s,lineNumber:23,columnNumber:9}}),u.default.createElement(o.View,{marginHorizontal:"s",__self:i,__source:{fileName:s,lineNumber:25,columnNumber:9}},u.default.createElement(o.Text,{lineHeight:32,textAlign:"auto",variant:"text",style:{marginBottom:-8},__self:i,__source:{fileName:s,lineNumber:26,columnNumber:11}},(0,a.$t)(e.id)),u.default.createElement(o.Text,{variant:"body",lineHeight:20,__self:i,__source:{fileName:s,lineNumber:33,columnNumber:11}},e.id))),u.default.createElement(o.View,{alignItems:"flex-end",__self:i,__source:{fileName:s,lineNumber:39,columnNumber:7}},u.default.createElement(o.Text,{variant:"body",__self:i,__source:{fileName:s,lineNumber:40,columnNumber:9}},(0,a.$t)("amount"),":"," ",u.default.createElement(o.Text,(0,l.default)({variant:"text"},o.MediumFontProps,{__self:i,__source:{fileName:s,lineNumber:42,columnNumber:11}}),e.amount)),Number(e.USD)>0&&!["USD","USDT"].includes(e.id)&&u.default.createElement(o.Text,{variant:"body",__self:i,__source:{fileName:s,lineNumber:48,columnNumber:11}},(0,a.$t)("assetValue"),":"," ",u.default.createElement(o.Text,(0,l.default)({variant:"text"},o.MediumFontProps,{__self:i,__source:{fileName:s,lineNumber:50,columnNumber:13}}),e.USD)),t&&parseFloat(t[e.id]||"0")>0&&u.default.createElement(o.Text,{variant:"body",__self:i,__source:{fileName:s,lineNumber:57,columnNumber:11}},(0,a.$t)("frozenValue"),":"," ",u.default.createElement(o.Text,(0,l.default)({variant:"text"},o.MediumFontProps,{__self:i,__source:{fileName:s,lineNumber:59,columnNumber:13}}),parseFloat(t[e.id]||"0").toFixed(8)))))}},85403:(e,t,n)=>{var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LinkAddressBookToWithdraw=function(e){var t=this,n=e.setValue,r=(0,m.useTheme)().colors,d=(0,u.useRef)(null),_=(0,u.useState)(),b=(0,a.default)(_,2),N=b[0],p=b[1],h=(0,c.useAddressBookApi)(),v=h.data,w=void 0===v?[]:v,y=h.isFetching;return u.default.createElement(m.BottomSheet,{ref:d,size:"m",title:(0,o.$t)("yourAddressBook"),toggle:u.default.createElement(m.View,{flexDirection:"row",justifyContent:"flex-end",style:{marginTop:-25},__self:this,__source:{fileName:f,lineNumber:40,columnNumber:9}},u.default.createElement(m.Button,{margin:"none",height:25,variant:"flat",paddingBottom:"none",paddingEnd:"none",label:(0,o.$t)("addressBook"),onPress:function(){var e;null==(e=d.current)||e.open()},__self:this,__source:{fileName:f,lineNumber:45,columnNumber:11}})),__self:this,__source:{fileName:f,lineNumber:35,columnNumber:5}},(0,m.List)({data:w.map((function(e){return(0,l.default)({},e,{pressable:!0})})),Actions:function(e){return u.default.createElement(m.Icon,{name:e.id===(null==N?void 0:N.id)?"radio-button-on":"radio-button-off",fill:e.id===(null==N?void 0:N.id)?r.primary:r.text,onPress:e.id===(null==N?void 0:N.id)?void 0:function(){return p(e)},__self:t,__source:{fileName:f,lineNumber:63,columnNumber:11}})},listEmptyMessage:y?" ":(0,o.$t)("noItem",{item:(0,o.$t)("addressBook")}),onPress:p,ListItem:function(e){return(0,i.PaymentMethodItem)((0,l.default)({},e,{queryKey:"addressBook"}))}}),w.length?u.default.createElement(m.Button,{disabled:!N,onPress:function(){var e;null!=N&&N.address&&(n("address",null==N?void 0:N.address,{shouldValidate:!0,shouldDirty:!0,shouldTouch:!0}),null==(e=d.current)||e.close())},label:(0,o.$t)("add"),__self:this,__source:{fileName:f,lineNumber:91,columnNumber:9}}):u.default.createElement(s.CreateNewItem,{queryKey:"addressBook",Form:i.AddressBookForm,__self:this,__source:{fileName:f,lineNumber:89,columnNumber:9}}))};var l=r(n(67154)),a=r(n(63038)),u=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=l?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(39698),i=n(30657),s=n(33973),m=n(59693),c=n(51222),f="/Users/phinix/Workspace/BitBayt/src/features/Wallet/components/LinkAddressBookToWithdraw.tsx";function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}},69565:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WalletShortcuts=void 0;var l=n(39698),a=r(n(67294)),u=n(59693),o=this,i="/Users/phinix/Workspace/BitBayt/src/features/Wallet/components/WalletShortcuts.tsx",s=[{label:(0,l.$t)("deposits"),icon:"Deposit",key:"Deposit"},{label:(0,l.$t)("withdrawals"),icon:"Withdraw",key:"Withdraw"}];t.WalletShortcuts=function(e){var t=e.navigation;return a.default.createElement(u.View,{flexDirection:"row",justifyContent:"space-around",padding:"s",__self:o,__source:{fileName:i,lineNumber:31,columnNumber:3}},s.map((function(e){return a.default.createElement(m,{onPress:function(){return t.navigate(e.key,{parent:void 0})},key:e.key,icon:e.icon,label:e.label,__self:o,__source:{fileName:i,lineNumber:33,columnNumber:7}})})))};var m=function(e){var t=e.onPress,n=e.label,r=e.icon;return a.default.createElement(u.Pressable,{onPress:t,backgroundColor:"gray4",flex:1,justifyContent:"center",alignItems:"center",height:80,borderRadius:8,margin:"xs",__self:o,__source:{fileName:i,lineNumber:53,columnNumber:5}},a.default.createElement(u.SVGIcon,{name:r,__self:o,__source:{fileName:i,lineNumber:62,columnNumber:7}}),a.default.createElement(u.Text,{variant:"body",color:"black",paddingTop:"xs",__self:o,__source:{fileName:i,lineNumber:64,columnNumber:7}},n))}},32508:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(69565);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var l=n(26470);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var a=n(19716);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var u=n(85403);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}))},18881:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(67154)),a=r(n(63038)),u=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=l?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(785),i=n(40930),s=n(39698),m=n(59693),c=n(46823),f=n(50599),d=n(34787),_=n(51222),b=n(9033),N=n(32508),p=this,h="/Users/phinix/Workspace/BitBayt/src/features/Wallet/screens/Withdrawals.tsx";function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}t.default=function(e){var t,n,r,v,w,y,k=e.route,g=e.navigation,E=null==(t=k.params)?void 0:t.parent,x=u.default.useState(),$=(0,a.default)(x,2),P=$[0],O=$[1],S=u.default.useState(!1),j=(0,a.default)(S,2),B=j[0],M=j[1],W=u.default.useState(!1),V=(0,a.default)(W,2),T=V[0],A=V[1],C=(0,d.useCoins)().withdrawCoins,I=u.default.useState(Object.keys(C)[0]||"USDT"),D=(0,a.default)(I,2),L=D[0],F=D[1],U=(0,b.useStore)().user,q=U.kycLevel,H=U.phone;(0,u.useEffect)((function(){A(!q)}),[q]),(0,u.useEffect)((function(){g.addListener("beforeRemove",(function(){E&&g.navigate(E)}))}),[g,E]);var z=(0,d.useBalance)()[L],R=void 0===z?0:z,K=(0,c.createSchema)({note:(0,c.stringSchema)(),network:(0,c.requiredStringSchema)((0,s.$t)("network")),address:(0,c.requiredStringSchema)((0,s.$t)("address")),memo:(0,c.stringSchema)(),amount:(0,c.requiredNumberSchema)((0,s.$t)("amount")).moreThan(0,(0,s.$t)("yupMore",{field:(0,s.$t)("amount"),more:0})).min(0,(0,s.$t)("yupMin",{field:(0,s.$t)("amount"),min:0})).max(R,(0,s.$t)("yupBalance",{field:(0,s.$t)("amount"),max:R}))}).when((function(e,t){var n,r,l,a;if(e.network)return t.shape({amount:(0,c.requiredNumberSchema)((0,s.$t)("amount")).moreThan(0,(0,s.$t)("yupMore",{field:(0,s.$t)("amount"),more:0})).min(+((null==(n=C[L])||null==(r=n.networks[e.network])?void 0:r.min)||"0"),(0,s.$t)("yupMin",{field:(0,s.$t)("amount"),min:+((null==(l=C[L])||null==(a=l.networks[e.network])?void 0:a.min)||"0")})).max(R,(0,s.$t)("yupBalance",{field:(0,s.$t)("amount"),max:R}))})})),G=(0,d.useCustomForm)(K),Y=G.control,J=G.handleSubmit,Q=G.setValue,X=G.getValues,Z=G.reset,ee=G.formState.isValid,te=(0,i.useWatch)({control:Y,name:"network"}),ne=(0,_.useBlockchainWithdrawApi)(),re=ne.mutate,le=ne.isLoading,ae=function(e){var t=(0,l.default)({},e,{amount:""+e.amount,coin:L});re(t,{onSuccess:function(){var e,n,r={coin:L,network:t.network,address:t.address,amount:t.amount,fee:(null==(e=C[L])||null==(n=e.networks[t.network])?void 0:n.fee)+" "+L,header:(0,s.$t)("withdrawOrderDetailHint",{number:t.amount}),status:(0,s.$t)("pending"),orderTime:(new Date).toLocaleString()};t.memo&&(r.memo=t.memo),O(r),M(!0),(0,s.trackEvent)("Withdraw",r)}})};return u.default.createElement(m.Screen,{noPadding:!0,__self:p,__source:{fileName:h,lineNumber:156,columnNumber:5}},u.default.createElement(f.KeyboardAvoiding,{extraHeight:100,__self:p,__source:{fileName:h,lineNumber:157,columnNumber:7}},u.default.createElement(o.ScrollView,{__self:p,__source:{fileName:h,lineNumber:158,columnNumber:9}},u.default.createElement(m.View,{flex:1,padding:"m",__self:p,__source:{fileName:h,lineNumber:159,columnNumber:11}},u.default.createElement(m.View,{__self:p,__source:{fileName:h,lineNumber:160,columnNumber:13}},u.default.createElement(f.SelectCoin,{label:(0,s.$t)("withdrawCrypto"),coins:Object.values(C),selectedCoin:L,selectCoin:function(e){Z({network:void 0}),F(e)},__self:p,__source:{fileName:h,lineNumber:161,columnNumber:15}}),u.default.createElement(m.SelectB,{label:(0,s.$t)("withdrawNetwork"),control:Y,name:"network",data:Object.values((null==(n=C[L])?void 0:n.networks)||{}),hint:(0,s.$t)("selectNetworkHint"),__self:p,__source:{fileName:h,lineNumber:171,columnNumber:15}}),null!=(r=C[L])&&null!=(v=r.networks[te])&&v.withdrawDisabled?u.default.createElement(m.Text,{variant:"body",textAlign:"center",marginTop:"xl",__self:p,__source:{fileName:h,lineNumber:241,columnNumber:17}},(0,s.$t)("disableWithdrawAddress")):u.default.createElement(m.View,{__self:p,__source:{fileName:h,lineNumber:183,columnNumber:17}},u.default.createElement(f.AddressInput,{control:Y,setValue:Q,name:"address",networkName:"network",__self:p,__source:{fileName:h,lineNumber:184,columnNumber:19}}),u.default.createElement(N.LinkAddressBookToWithdraw,{setValue:Q,__self:p,__source:{fileName:h,lineNumber:191,columnNumber:19}}),(null==(w=C[L])||null==(y=w.networks[te])?void 0:y.hasMemo)&&u.default.createElement(f.AddressInput,{control:Y,setValue:Q,label:(0,s.$t)("memo"),name:"memo",isMemo:!0,networkName:"network",__self:p,__source:{fileName:h,lineNumber:194,columnNumber:21}}),u.default.createElement(m.Input,{name:"amount",placeholder:(0,s.$t)("enterItem",{item:(0,s.$t)("amount")}),keyboardType:"numeric",control:Y,label:(0,s.$t)("amount"),__self:p,__source:{fileName:h,lineNumber:204,columnNumber:19}}),u.default.createElement(m.Input,{name:"note",control:Y,label:(0,s.$t)("note"),placeholder:(0,s.$t)("enterNote"),__self:p,__source:{fileName:h,lineNumber:212,columnNumber:19}}),u.default.createElement(s.OTPMobile,{phone:H,target:"withdraw",payload:(0,l.default)({},X()),toggle:function(e){var t=e.sendCode,n=e.isLoading;return u.default.createElement(m.Button,{label:(0,s.$t)("submit"),loading:n||le,disabled:!ee||!q,onPress:function(){return q?t(H):A(!0)},__self:p,__source:{fileName:h,lineNumber:224,columnNumber:23}})},onConfirm:function(e){e&&J(ae)()},__self:p,__source:{fileName:h,lineNumber:219,columnNumber:19}}))),u.default.createElement(m.Modal,{isVisible:B,onRequestClose:function(){return M(!1)},__self:p,__source:{fileName:h,lineNumber:247,columnNumber:13}},u.default.createElement(f.OrderSuccess,{action:"withdraw",details:P,setModalVisible:M,__self:p,__source:{fileName:h,lineNumber:250,columnNumber:15}})),u.default.createElement(m.Popup,{isVisible:T,code:"KYC",onRequestClose:function(e){var t=e.isAccepted;A(!1),t&&g.navigate("Settings",{redirectTo:"Profile"})},__self:p,__source:{fileName:h,lineNumber:257,columnNumber:13}})))))}}}]);